Please optimize this into O(n) time complexity. If possible O(1) is preferred. 
